---
title: C++11 Basics
tags: [CPP]
categories: [CPP,C++11]
date: 2019-01-18 10:48:46
description:
---
> [C++11 Reference](http://www.cplusplus.com/doc/tutorial/introduction/)

# C++ Compiler

> C++编译器将高级编程语言翻译、解释为机器语言。如下：

{% tabs same program %}
<!-- tab -->
Machine Language：
| 00000	| 10011110 |
| 00001	| 11110100 |
| 00010	| 10011110 |
| 00011	| 11010100 |
| 00100	| 10111111 |
| 00101 | 00000000 |
<!-- endtab -->
<!-- tab -->
C++:
int a, b, sum;
     
cin >> a;
cin >> b;
             
sum = a + b;
cout << sum << endl;
<!-- endtab -->
{% endtabs %}

<!-- more -->
---------------------------------
# Structure of a program

以经典程序`Hello World`为例：

```C++
//预处理指示：与处理器包含c++标准iostream库
#include <iostream>
//函数起始声明：在c++中mainhanshu表示程序开始执行的位置
int main()
{
  //namespace std（std为c++标准库）中声明、定义了cout
  std::cout << "Hello World!";
}
```
-------------------------------------
# [Variables](http://www.cplusplus.com/doc/tutorial/variables/) and [constants](http://www.cplusplus.com/doc/tutorial/constants/)

| Name | Variables | Constants |
| :---: | :--- | :--- |
| **Definition** | a portion of memory to store a value | expressions with a fixed value |
| **Name/Identifier** | a sequence of one or more letters, digits, or underscore characters without space, punctuation marks and symbols | same to variables |
| **Type** | char, int, float, bool, void, nullptr | literal(can be classified into char, int, float, string, bool, pointer)<br> char, int(decimal, octal(0), hexadecimal numbers(0x)), float, bool, pointer |
|**Compound Type**| string: defined in standard C++ lib **string** | string |
| **Prefix** | - | **char/string**:<br> u -> char16\_t <br> U -> char32_t <br> L -> wchar\_t <br> **string**: <br> u8 -> The string literal is encoded in the executable using UTF-8 <br> R -> The string literal is a raw string(backslashes and single and double quotes are all valid characters); can be combined with u, L or u8|
| **Suffix** | - | **int**: <br> u or U -> unsigned <br> l or L -> long <br> ll or LL -> long long <br> **float**: <br> f or F -> float <br> l or L -> long double|
|**Escape code**| - | **\n**: newline <br> **\r**: carriage return <br> **\t**: tab <br> **\v**: vertical tab <br> **\b**: backspace <br> **\f**: form feed(page feed) <br> **\a**: alert(beep) <br> **\'**: single quote <br> **\"**: double qoute <br> **\?**: question mark <br> **\\\**: backslash|
| **Declaration** | type identifier; e.g. int a | **const** type identifier; e.g. const double pi = 3.14159 |
|**Definition**| same to initialization | #define identifier replacement; e.g. #definde PI 3.14159 |
| **Initialization** | **C-like Initialization**:<br> type identifier = initial\_value; e.g. int x = 0 <br> **Construction Initialization**:<br> type identifier (initial\_value); e.g. int x (0) <br> **Uniform Initialization**:<br> type identifier {initial\_value}; e.g. int x {0} |-|
| **Type Deduction** | auto, decltype |-|

-----------------------------------
# [Operators](http://www.cplusplus.com/doc/tutorial/operators/)

| **Operator implication** | **Symbol representation** | **Annotation** |
| :---: | :---: | :--- |
| Assignment | **=** | 左值与右值;表达式含义为将右值赋予左值;右值支持算数表达式（arithmetic expressions） | 
| Arithmetic | **+**,**-**,*,**/**,**%** |addition, subtraction, multiplication, division, modulo |
| Compound Assignment | +=, -=, *=, /=, %=, >>=, <<=, &=, ^=, OR= | Compound assignment operators modify the current value of a variable by performing an operation on it. 左值 = 左值 operator 右值; OR= 表示”或等“|
| Increment & Decrement | **++**,**--** | 步长为1的加减操作，结果返回赋值给左值变量（使用该++/--操作符的变量） |
| Relational and comparison operators |  **==**, **!=**, **>**, **<**, **>=**, **<=** | Expressions comparison |
| Logical operators | **!**, **&&**, **OR OR** | NOT, AND, OR; OROR 表示*或* |
| Conditional Operator | **?** | condition ? result1 : result2; 条件正确返回result1, 否则返回result2 |
| Bitwise operator | &, OR, ^, ~, <<, >> | AND, OR, XOR, NOT, SHL, SHR |
| sizeof | **sizeof()** | 接受类型或变量参数，返回类型或对象的字节数（bytes） |

--------------------------
# Basic Input/Output

> <mark>*stream*</mark>: C++的`stream`抽象用于向`sequential medias`如screen、keyboard和file,执行`Input/Output`操作。程序可以向/从`stream entity`中顺序化插入（`insert`）或提取（`extract`）字符（`characters`），`stream`则是字符（`characters`）的源与目的地（`source & destination`）。

## Stream结构
C++标准库提供了几种`stream`对象。

| **stream** | **description** |
| :----: | :----- |
| cin | standard input stream |
| cout | standard output stream |
| cerr | standard error (output) stream |
| clog | standard logging (output) stream |
| stringstream | The standard header **sstream** defines *stringstream* allowing a string to be treated as a stream |

### cout

> `cout`通常与`insertion operator <<`搭配用于格式输出。

#### Examples

```c++
cout << "Output sentence"; // prints Output sentence on screen and double qoutes for string literals
cout << 120;               // prints number 120 on screen
cout << x;                 // prints the value of x on screen 
cout << "Hello";  // prints Hello
cout << Hello;    // prints the content of variable Hello
cout << "This " << " is a " << "single C++ statement";   //chain <<
cout << "I am " << age << " years old and my zipcode is " << zipcode;
cout << "First sentence." << endl;   //endl for newline
```
`<<`将其后的数据顺序插入`cout stream`之后。

#### endl vs '\n'

二者都能开始新行，但是`endl`引发`stream buffer flushed`操作，强行将`stream`中的字符写入设备。但是，`flush`操作会引入额外的资源开销，对于延迟敏感型的应用程序，可能会造成额外的延迟。

### cin

> cin是c++用于访问输入设备的`stream object`。
> `cin`通常与`extraction operator >>`搭配用于格式输入。

#### Examples

```c++
int age;
cin >> age;   //该操作使程序等待'cin'输入; '>>'后的变量负责解释和表示输入的字符
cin >> a >> b;   // chain >>
```

### cin & string

> 可以从`cin stream`中提取字符串`string`。但是，空白符（whitespace, tab, newline）会终止字符串的提取。同时，C++提供了`getline`函数用于从`cin stream`提取一整行字符串。
> 细节可以参考[get & getline](https://leopold-sun.com/get-getline.html)。

#### Examples

```c++
// cin with strings
#include <iostream>
#include <string>
using namespace std;

int main ()
{
  string mystr;
  cout << "What's your name? ";
  getline (cin, mystr);
  cout << "Hello " << mystr << ".\n";
  cout << "What is your favorite team? ";
  getline (cin, mystr);
  cout << "I like " << mystr << " too!\n";
  return 0;
}
```
Display:
```bash
What's your name? Homer Simpson
Hello Homer Simpson.
What is your favorite team? The Isotopes
I like The Isotopes too!
```

```c++
// stringstreams
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main ()
{
  string mystr;
  float price=0;
  int quantity=0;

  cout << "Enter price: ";
  getline (cin,mystr);
  stringstream(mystr) >> price;
  cout << "Enter quantity: ";
  getline (cin,mystr);
  stringstream(mystr) >> quantity;
  cout << "Total price: " << price*quantity << endl;
  return 0;
}
```
Display:
```bash
$ ./stringstream2
Enter price: 9.5
Enter quantity: 10
Total price: 95
```

### stringstream

> C++头文件**sstream**定义了新的类型`stringstream`，允许`string`被视为`stream`，常用与<mark>字符串与数值的相互转换</mark>。

#### Example

```c++
#include<sstream>
#include<string>
#include<iostream>
using namespace std;

int main(){
  string mystr("before string");
  cout<<"Younger mystr:"<<mystr<<"\n";
  cout<<"Enter a new string:\n";
  cin>>mystr;
  int myint(1000);
  cout<<"Younger myint:"<<myint<<"\n";
  stringstream(mystr) >> myint;
  cout<<"Older myint:"<<mystr<<"\n";
  return 0;
}
```
Display：
```bash
$ ./stringstream 
Younger mystr:before string
Enter a new string:
1024
Younger myint:1000
Older myint:1024
```

```c++
// stringstreams
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main ()
{
  string mystr;
  float price=0;
  int quantity=0;

  cout << "Enter price: ";
  getline (cin,mystr);
  stringstream(mystr) >> price;
  cout << "Enter quantity: ";
  getline (cin,mystr);
  stringstream(mystr) >> quantity;
  cout << "Total price: " << price*quantity << endl;
  return 0;
}
```
Display:
```bash
$ ./stringstream2
Enter price: 9.5
Enter quantity: 10
Total price: 95
```


